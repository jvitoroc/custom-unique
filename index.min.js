var __TYPE_OF_U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(a,b){"function"==typeof define&&define.amd?define([],b):"object"===("undefined"==typeof module?"undefined":__TYPE_OF_U(module))&&module.exports?module.exports=b():a.customUnique=b()})("undefined"==typeof self?void 0:self,function(){"use strict";function a(a,b){var e,f,g=[],h=0,i="",j=a.replace(c,function(a,c,j,k){if(i=b[c],!d.call(b,c))throw new Error("[custom-unique] One or more placeholder(s) in format (second arg) doesn't exist in config.");return f=void 0==e?k:e.pos+e.times+(k-h),g.push({key:c,times:void 0===j?i.length:+j,pos:f}),e=g[g.length-1],h=k+a.length,""});return{matches:g,newFormat:j}}function b(a){var b=Math.floor,c=0;return a=b(a),b(Math.random()*(a-c))+c}var c=/\(\(\s*([^\(\)]*)\s*\)(\d*)?\)/g,d=Object.prototype.hasOwnProperty;return{compile:function(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:void 0,d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:void 0;if("string"!=typeof d||d instanceof String||1>d.length)throw new Error("The second argument (format) is invalid.");if("object"!==("undefined"==typeof c?"undefined":__TYPE_OF_U(c)))throw new Error("The first argument (config) is invalid.");var e=a(d,c);return function(){var a,d,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",h=e.newFormat,i="";return e.matches.forEach(function(e){for(a=c[e.key],d=0;d<e.times;d++)i+=a[b(a.length)];h=h.slice(0,e.pos)+i+h.slice(e.pos),i=""}),f+h+g}}}});